{"version":3,"sources":["../../src/api/index.js"],"names":["config","db","api","use","get","req","res","json","version","console","log","endpoints","length","i","endpoint","method","url","post"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;;;kBAGe,gBAAoB;AAAA,KAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,KAATC,EAAS,QAATA,EAAS;;AAClC,KAAIC,MAAM,sBAAV;;AAEA;AACAA,KAAIC,GAAJ,CAAQ,SAAR,EAAmB,sBAAO,EAAEH,cAAF,EAAUC,MAAV,EAAP,CAAnB;;AAEA;AACAC,KAAIE,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIC,IAAJ,CAAS,EAAEC,yBAAF,EAAT;AACA,EAFD;;AAIAC,SAAQC,GAAR,CAAY,UAAUV,OAAOW,SAAP,CAAiBC,MAA3B,GAAoC,qBAAhD;AACA,MAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEb,OAAOW,SAAP,CAAiBC,MAAjC,EAAyCC,GAAzC,EAA8C;AAC7C,MAAIC,WAAWd,OAAOW,SAAP,CAAiBE,CAAjB,CAAf;AACA,MAAIC,SAASC,MAAT,IAAmB,KAAvB,EAA8B;AAC7BN,WAAQC,GAAR,CAAY,qBAAqBI,SAASE,GAA1C;AACAd,OAAIE,GAAJ,CAAQ,MAAMU,SAASE,GAAvB,EAA4B,UAACX,GAAD,EAAMC,GAAN,EAAc;AACzCA,QAAIC,IAAJ,CAAS,EAAE,YAAY,OAAd,EAAT;AACA,IAFD;AAGA,GALD,MAKO,IAAIO,SAASC,MAAT,IAAmB,MAAvB,EAA+B;AACrCN,WAAQC,GAAR,CAAY,sBAAsBI,SAASE,GAA3C;AACAd,OAAIe,IAAJ,CAAS,MAAMjB,OAAOW,SAAP,CAAiBE,CAAjB,EAAoBG,GAAnC,EAAwC,UAACX,GAAD,EAAMC,GAAN,EAAc;AACrDA,QAAIC,IAAJ,CAAS,EAAE,YAAY,OAAd,EAAT;AACA,IAFD;AAGA;AACD;;AAED,QAAOL,GAAP;AACA,C","file":"index.js","sourcesContent":["import { version } from '../../package.json';\nimport { Router } from 'express';\nimport facets from './facets';\n\n\nexport default ({ config, db }) => {\n\tlet api = Router();\n\n\t// mount the facets resource\n\tapi.use('/facets', facets({ config, db }));\n\n\t// perhaps expose some API metadata at the root\n\tapi.get('/', (req, res) => {\n\t\tres.json({ version });\n\t});\n\n\tconsole.log('++++ ' + config.endpoints.length + ' endpoints declared');\n\tfor (var i=0; i<config.endpoints.length; i++) {\n\t\tvar endpoint = config.endpoints[i];\n\t\tif (endpoint.method == 'GET') {\n\t\t\tconsole.log('      __ GET on ' + endpoint.url);\n\t\t\tapi.get('/' + endpoint.url, (req, res) => {\n\t\t\t\tres.json({ 'greeting': 'hello' });\n\t\t\t});\n\t\t} else if (endpoint.method == 'POST') {\n\t\t\tconsole.log('      __ POST on ' + endpoint.url);\n\t\t\tapi.post('/' + config.endpoints[i].url, (req, res) => {\n\t\t\t\tres.json({ 'greeting': 'hello' });\n\t\t\t});\n\t\t}\n\t}\n\n\treturn api;\n}\n"]}